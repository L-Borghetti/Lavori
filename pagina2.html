<!DOCTYPE html>
<html>
<head>
  <title>Tabella Anagrafica</title>
</head>
<body>

<h2>Elenco Persone</h2>

<table id="tabella1" border="1">
</table>

<script>

s = "";

var url = document.location.search.substring(1);
alert(url);

var url1 = url.split("&")[0];
var url2 = url.split("&")[1];

var ind1 = url1.substr(5);
var ind2 = url2.substr(5);

// REGEXP: indice deve essere 2 cifre
var formatoIndice = /^[0-9]{2}$/;

if (!formatoIndice.test(ind1) || !formatoIndice.test(ind2))
{
    alert("Formato indice non valido");
}

// recupero oggetti
var persone = JSON.parse(localStorage.getItem("persone"));

// intestazione
s = s + "<tr>";
s = s + "<th>Indice</th>";
s = s + "<th>Nome</th>";
s = s + "<th>Cognome</th>";
s = s + "<th>Et√†</th>";
s = s + "</tr>";

// ciclo dinamico
for (i = 0; i < persone.length; i++)
{
    var indice = (i == 0) ? ind1 : ind2;

    s = s + "<tr>";
    s = s + "<td>" + indice + "</td>";
    s = s + "<td>" + persone[i].nome + "</td>";
    s = s + "<td>" + persone[i].cognome + "</td>";
    s = s + "<td>" + persone[i].eta + "</td>";
    s = s + "</tr>";
}

document.getElementById("tabella1").innerHTML = s;

</script>

</body>
</html>
